<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Castor3D: Moteur Castor3D</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Castor3D
   &#160;<span id="projectnumber">..</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Généré par Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Recherche');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Moteur Castor3D </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="intro_sec"></a>
Suivi de versions</h1>
<p>Cette page sert à informer des évolutions du moteur depuis les premières versions.</p>
<h1><a class="anchor" id="version_0_9_0"></a>
Version 0.9.0</h1>
<h2><a class="anchor" id="feat_0_9_0"></a>
Fonctionnalités</h2>
<h3><a class="anchor" id="feat_0_9_0_cu"></a>
CastorUtils</h3>
<ul>
<li>
Dropped libzip, and added minizip to the source tree. </li>
</ul>
<h3><a class="anchor" id="feat_0_9_0_c3d"></a>
Castor3D</h3>
<ul>
<li>
Entire review of the render loop: RenderPipeline is no more a unique instance, but it actually contains the states, the program, and uniform buffer bindings.<br />
 It has been done to prepare the arrival of Vulkan, in which the pipeline can't be modified once it has been created, and that is now the case in Castor3D too. </li>
<li>
The rendering has been splitted in RenderPasses, that each have one or more RenderQueues, that are updated asynchronously on CPU.<br />
 This allows the GPU loop to be cleaned of most CPU computations. </li>
<li>
Skybox have been added. </li>
<li>
Binary export has been completely reviewed, it now uses a chunk data format (like LWO or 3DS).<br />
 It is used for meshes, and skeletons. </li>
<li>
Plug-ins interface's consistency has been improved. </li>
<li>
Fog basic implementations (linear, exponential, and squared exponential) have been added. </li>
<li>
Morphing (per-vertex) animations are now supported by Castor3D. </li>
<li>
Frustum culling has been implemented. </li>
<li>
Colour picking has been implemented. </li>
<li>
Shadow mapping is implemented, lights can produce shadows, and objects can cast shadows. </li>
<li>
Particle system has been implemented, giving to the user the implementation choice (CPU through class override, GPU through Transform Feedback or Compute shaders). </li>
<li>
Fixed the lighting in GLSL, to make it behave properly without dirty hacks. </li>
<li>
Compute shaders have been integrated to Castor3D, along with Shader Storage Buffers and Atomic Counter Buffers. </li>
<li>
Textures implementation have been completely reviewed, we now have TextureLayout, which holds the TextureImage(s), and the TextureStorage per image.<br />
 It has allowed the creation of cube textures. </li>
<li>
Textures transfer to RAM has been fixed. </li>
<li>
Billboard rendering no more uses a geometry shader, it now relies on hardware instantiation of a quad, and the positions are given as side attributes. </li>
<li>
UniformBuffer (formerly FrameVariableBuffer) no longer depends on ShaderProgram. </li>
<li>
A new class, UniformBufferBinding has been created which depends on both UniformBuffer and ShaderProgram.<br />
 Instances of this class are held by RenderPipeline. </li>
<li>
FrameVariable class has been split in two classes: Uniform (for uniform variables contained in a UniformBuffer) and PushUniform (for uniform variables out of a UniformBuffer). </li>
</ul>
<h3><a class="anchor" id="feat_0_9_0_gl"></a>
GlRenderSystem</h3>
<ul>
<li>
Updated to support the features provided by Castor3D. </li>
</ul>
<h3><a class="anchor" id="feat_0_9_0_tec"></a>
Techniques</h3>
<ul>
<li>
DeferredRenderTechnique and DeferredMsaaRenderTechnique are now real deferred rendering techniques, with a light pass per light, taking care of it's impact area. </li>
<li>
DeferredRenderTechnique is now the default render technique, when none is specified. </li>
</ul>
<h3><a class="anchor" id="feat_0_9_0_pos"></a>
PostEffects</h3>
<ul>
<li>
Added GrayScale post effect. </li>
<li>
Added FXAA post effect. </li>
</ul>
<h1><a class="anchor" id="version_0_8_0"></a>
Version 0.8.0</h1>
<h2><a class="anchor" id="feat_0_8_0"></a>
Modifications</h2>
<h3><a class="anchor" id="feat_0_8_0_gen"></a>
Général</h3>
<ul>
<li>
Compile maintenant avec VS &gt;= 2013 et GCC &gt;= 4.9. </li>
<li>
Le support de Direct3D a été abandonné, n'ayant pas le temps pour l'implémenter correctement. </li>
</ul>
<h3><a class="anchor" id="feat_0_8_0_cu"></a>
CastorUtils</h3>
<ul>
<li>
Les opérations pour les Point4f et les Matrix4x4f peuvent maintenant utiliser les instructions SSE2. </li>
<li>
Tous les projets du Castor utilisent maintenant des textes UTF-8, stockés dans des std::string. </li>
</ul>
<h3><a class="anchor" id="feat_0_8_0_c3d"></a>
Castor3D</h3>
<ul>
<li>
Le système d'animations par squelette est maintenant finalisé et fonctionnel. </li>
<li>
Suppression de toutes les classes XxxRenderer, sauf OverlayRenderer. </li>
<li>
Le type de topologie de dessin n'est plus dans la classe Camera, mais dans GeometryBuffers. </li>
<li>
Engine a été retravaillée, en ajoutant des classes RenderLoop, ainsi que des Managers, s'occupant de la création des éléments, leur stockage et leur récupération. </li>
<li>
SceneFileParser a été étendue, pour pouvoir utiliser des directives d'analyse depuis des plug-ins externes. </li>
<li>
Les tampons d'image de la fenêtre sont maintenant récupérés, et liables comme les autres tampons d'image, il n'est cependant pas possible de leur créer ou ajouter des attaches. </li>
<li>
Ajout d'un système de traçage des objets GPU créés, pour s'assurer que leur destruction s'effectue avant la destruction de leur contexte. </li>
<li>
Les incrustations texte peuvent maintenant avoir un alignement vertical et/ou horizontal. </li>
<li>
Castor3D peut maintenant lire les scènes depuis des archives ZIP. </li>
<li>
Ajout d'une archive ZIP, Core.zip, contenant des matériaux basiques, ainsi que les incrustations de débogage. </li>
<li>
Cette archive est chargée lors de la sélection de l'API de rendu. </li>
<li>
Le code shader de l'éclairage a été revu et corrigé. </li>
<li>
La clase Scene a été retravaillée, pour utiliser la classe ObjectManager, ainsi que les vues sur les ResourceManagers. </li>
<li>
Maintenant ShaderProgram récupère la configuration des attributs de sommets en enrée du vertex shader. </li>
<li>
Cette configuration est utilisée par la classe Submesh, pour créer les GeometryBuffers qui vont bien. </li>
<li>
Castor3D utilise le High Dynamic Range pour dessiner les scènes. Le mappage de tons par défaut permet d'avoir un rendu similaire à un rendu sans HDR. </li>
</ul>
<h3><a class="anchor" id="feat_0_8_0_gl"></a>
GlRenderSystem</h3>
<ul>
<li>
La texture de lumières utilise maintenant les Texture Buffer Objects. </li>
<li>
Suppression des classes GlXxxRenderer. </li>
<li>
Le support d'OpenGL 1.x a été supprimé. </li>
<li>
Le support d'OpenGL 3.x a été renforcé, en forçant l'utilisation des UBOs, par exemple. </li>
<li>
Implémentation de GlslWriter, pour pouvoir écrire les shaders depuis un fichier source C++. </li>
</ul>
<h3><a class="anchor" id="feat_0_8_0_sub"></a>
Subdiviseurs</h3>
<ul>
<li>
Implémentation d'un subdiviseur tessellation de Phong. </li>
<li>
Mise à jour du subdiviseur Loop. </li>
</ul>
<h3><a class="anchor" id="feat_0_8_0_imp"></a>
Importeurs</h3>
<ul>
<li>
Implémentation d'un plug-in d'importation de fichiers FBX. </li>
</ul>
<h3><a class="anchor" id="feat_0_8_0_tec"></a>
Techniques</h3>
<ul>
<li>
Chaque technique de rendu est maintenant implémentée dans son propre plug-in. </li>
</ul>
<h3><a class="anchor" id="feat_0_8_0_pos"></a>
PostEffects</h3>
<ul>
<li>
Le premier plug-in d'effet post rendu a été implémenté: HDR Bloom. </li>
</ul>
<h3><a class="anchor" id="feat_0_8_0_cgui"></a>
CastorGUI</h3>
<ul>
<li>
Nouveau plug-in, permettant la création d'IHM au sein des scènes Castor3D. </li>
</ul>
<h3><a class="anchor" id="feat_0_8_0_gui"></a>
GuiCommon</h3>
<ul>
<li>
L'aspect global des application avec IHM a été retravaillé, en utilisant wxAuiManager. </li>
<li>
Utilisation de wxTreeCtrl et des wxPropertyGrid, pour lister les objets, et visualiser leurs propriétés. </li>
</ul>
<h2><a class="anchor" id="bugs_0_8_0"></a>
Fixed Bugs</h2>
<h3><a class="anchor" id="bugs_0_8_0_cu"></a>
CastorUtils</h3>
<ul>
<li>
Les matrices de transformation ont été corrigées. </li>
</ul>
<h3><a class="anchor" id="bugs_0_8_0_c3d"></a>
Castor3D</h3>
<ul>
<li>
Correction de l'instanciation GPU. </li>
<li>
Correction d'un bug dans la gestion des matériaux des incrustations panneaux bordurés. </li>
<li>
Correction d'un bug pour les incrustations, révélé sur les GPU Intel (était dû à un bug du driver AMD qui cachait ce bug). </li>
<li>
Correction des billboards. </li>
</ul>
<h3><a class="anchor" id="bugs_0_8_0_sub"></a>
Subdividers</h3>
<ul>
<li>
Correction du sudiviseur PN Triangles, en utilisant des patches Bézier. </li>
</ul>
<h3><a class="anchor" id="bugs_0_8_0_gl"></a>
GlRenderSystem</h3>
<ul>
<li>
Correction d'un crash sous Linux, avec GPU Intel. </li>
</ul>
<h1><a class="anchor" id="version_0_7_0"></a>
Version 0.7.0</h1>
<h2><a class="anchor" id="mods_0_7_0"></a>
Modifications</h2>
<h3><a class="anchor" id="mods_0_7_0_cmk"></a>
CMake</h3>
<ul>
<li>
Ajout de la possibilité de changer le dossier des binaires, au travers des variables PROJECTS_BINARIES_OUTPUT_PATH et PROJECTS_BINTEMP_OUTPUT_PATH. </li>
<li>
Ajout du support d'AStyle, activé via l'option PROJECTS_USE_PRETTY_PRINTING. </li>
<li>
Utilisation de CPack pour générer le setup WiX (ou DEB), activé via l'option PROJECTS_PACKAGE_WIX (respectivement PROJECTS_PACKAGE_DEB). </li>
<li>
Ajout de la possibilité d'activer le profileur de code de Visual Studio, avec l'option PROJECTS_PROFILING. </li>
<li>
Ajout de la possibilité de choisir quels projets du Castor sont à générer (dans le groupe CASTOR). </li>
<li>
Réorganisation globale de l'arborescence des fichiers </li>
</ul>
<h3><a class="anchor" id="mods_0_7_0_gen"></a>
Général</h3>
<ul>
<li>
Découpe des fichiers afin de n'avoir plus qu'une classe par fichier. </li>
<li>
Support de la compilation x64. </li>
<li>
Compabilité avec wxWidgets 2.8 et Linux améliorée. </li>
<li>
Ajout de fonctions Destroy pour chaque fonction create dans les plug-ins, afin que la création et la destruction de ceux-ci se fassent dans l'espace mémoire des DLL (pour Windows). </li>
<li>
Ajout du plug-in d'import ASSIMP, permettant d'élargir le nombre de formats supportés. La fonction ImporterPlugin::getExtensions permet maintenant de récupérer un tableau de paires &lt;extension, file type&gt;. </li>
</ul>
<h3><a class="anchor" id="mods_0_7_0_cu"></a>
CastorUtils</h3>
<ul>
<li>
Toutes les variables statiques et globales ont été enlevées. </li>
<li>
Remplacement de la classe String par une classe string. </li>
<li>
Suppression des dépendances à boost, à part pour thread, et uniquement pour les compilateurs ne supportant pas std::thread. </li>
<li>
Les macros cstrnlen, cstrftime, cstrncpy, cfopen, cfopen64, cfseek et cftell ont été remplacées par des fonctions dans Castor. </li>
<li>
Suppression de la macro DECLARE_SHARED_PTR, remplacée par DECLARE_SMART_PTR, et les typedefs XxxPtr ont été remplacés par leurs équivalents XxxSPtr. </li>
<li>
Suppression de l'encodage Unicode pour les fichiers. </li>
<li>
Ajout du support de l'indentation de flux. </li>
<li>
Améliorations de castor::FileParser : <ul>
<li>
Il peut ignorer des sections de code sans avoir à les commenter (tels que les blocs de shader HLSL alors que le RenderSystem chargé est GlRenderSystem, etc.). </li>
<li>
Il prend en compte les paramètres des fonctions d'analyse. </li>
<li>
Les fonctions peuvent maintenant avoir des paramètres, pas uniquement des types de paramètres, et ces paramètres s'analysent eux-mêmes. </li>
</ul>
</li>
<li>
Réduction de l'occupation mémoire des images. </li>
<li>
Modification de castor::Point : <ul>
<li>
les fonctions non dépendantes ont été déplacées dans une classe d'aide : castor::point. Cette classe contient donc les fonctions normalise, getNormalised, dot, cosTheta, negate et toutes les fonctions de calcul de distance. </li>
<li>
Suppression des méthodes link, copy/clopy/clone. </li>
<li>
Il contient maintenant un tableau statique au lieu d'un tableau dynamique. </li>
</ul>
</li>
<li>
La classe castor::Colour ne dérive plus de Point4f. </li>
<li>
La fonction DynamicLibrary::getFunction a été modifiée, ajout d'un paramètre template, le type de fonction, afin de ne plus avoir de conversions lors de l'utilisation de DynamicLibrary::getFunction. </li>
<li>
Ajout du support des niveaux de log pour castor::Logger. </li>
<li>
Modifications de castor::Line3D : <ul>
<li>
Implémentation de la méthode de calcul d'intersection </li>
<li>
Cette classe a maintenant deux constructeurs nommés : fromPointAndSlope et FromUniforms, pour éviter les confusions. </li>
</ul>
</li>
<li>
Création de deux nouvelles classes : Size et Positionau lieu d'un typedef pour chacune. </li>
<li>
Création de la classe castor::Coord pour récupérer les fonctionnalités dynamiques de l'ancien castor::Point. </li>
</ul>
<h3><a class="anchor" id="mods_0_7_0_c3d"></a>
Castor3D</h3>
<ul>
<li>
Ajout des méthodes hasParameter et setParameter dans la classe ShaderObject, pour appliquer les matrices de la classe RenderPipeline. </li>
<li>
Ajout de fonctions Begin et End dans la classe Mesh afin de pouvoir itérer sur les submeshes sans passer par les fonctions getSubmesh et getSubmeshCount. </li>
<li>
Ajout de fonctions Begin et End dans la classe Material functions Begin and End. </li>
<li>
Ajout de la classe Buffer pour gérer les variables uniformes avec les UBO OpenGL ou les Constant buffer de Direct3D 11. </li>
<li>
Ajout de la classe DepthStencilState pour gérer ces états à la mode Direct3D 11 (qui fait ça bien). </li>
<li>
De même, ajout des classes BlendState et RasteriserState. </li>
<li>
Création des classes Texture, StaticTexture et TextureLayout pour faciliter l'implémentation des cibles de rendu. </li>
<li>
Ajout de canaux pour les textures (couleur, ambiante, diffusion, speculaire, normale, hauteur, brillance). </li>
<li>
Création de la classe TechniqueParameters pour passer des paramètres spécifiques aux techniques comme, par exemple, le nombre d'échantillons (pour le MSAA). </li>
<li>
Introduction de la classe SamplerState pour grouper les appels à setSamplerState et autres. </li>
<li>
Implémentation des Frame Buffers. </li>
<li>
Réduction de l'occupation mémoire des tampons de sommets. </li>
<li>
Modification de BufferElementGroup afin qu'il ne puisse plus contenir son tampon. </li>
<li>
La classe Overlay n'étend plus Renderable, il n'y a plus qu'une instance de OverlayRenderer, gérée par la classe OverlayCache. Toutes les incrustations sont maintenant rendues via cette instance. </li>
<li>
Amélioration de l'occupation mémoire : diminution drastique de la taille d'un Vertex (de 152 à 24 octets) et d'une Face (de 140 à 16 octets). </li>
<li>
Modification de Subdivision, elle se trouve maintenant uniquement dans Subdivider et plus dans Geometry, Mesh ou Submesh. </li>
<li>
Les lumières sont maintenant implémentées dans une texture, passant la limite de 8 à 100 sources. </li>
<li>
Suppression des méthodes ApplyXXXMatrix de la classe IPipelineImpl, maintenant la classe RenderPipeline applique les matrices elle-même. </li>
<li>
Implémentation du MSAA. </li>
<li>
Implémentation de l'Alpha to Coverage lorsque le MSAA est activé. </li>
<li>
Revue des tailles : Viewport contient la taille interne, RenderTarget et RenderWindow contiennent la taille externe. </li>
<li>
Découpe de eBUFFER_MODE en BufferAccessType et BufferAccessNature. </li>
<li>
L'initialisation des objets GPU se passe maintenant avec l'utilisation de deux évènements : InitialiseEvent et CleanupEvent. </li>
<li>
Fusion de GpuBuffer::Initialise et GpuBuffer::setShaderProgram afin d'en simplifier l'utilisation. </li>
<li>
Suppression de la génération automatique des mipmaps. Maintenant, si l'utilisateur vuet les générer, il utilise la fonction TextureLayout::GenerateMipmaps. </li>
<li>
Implémentation de l'instanciation hardware des maillages. </li>
<li>
Modifications de <a class="el" href="d3/d0f/a02203.html" title="Representation d&#39;un sous-maillage. ">castor3d::Submesh</a> : <ul>
<li>
Les classes Submesh et SmoothingGroup ont été fusionnées. </li>
<li>
Modification de la méthode computeTangents pour prendre en compte les normales des sommets. </li>
<li>
Ajout d'un overload pour la méthode addUniforms afin de pouvoir lui donner un stVERTEX_GROUP en paramètre. </li>
<li>
Modification de la génération des normales. </li>
<li>
Déplacement des matériaux, de Submesh à Geometry. </li>
<li>
Modification du compte des instances, pour le rendre spécifique aux matériaux utilisés par les instances du Submesh. </li>
</ul>
</li>
<li>
Modifications de <a class="el" href="d5/db4/a02011.html" title="Classe de base d&#39;une passe d&#39;un matériau. ">castor3d::Pass</a> : <ul>
<li>
Création d'une fonction Pass::Initialise afin que les shaders ne soient initialisés qu'une fois, et pas à chaque frame. </li>
<li>
Réorganisation des unités de texture des passes, afin que celles associées à un canal arrivent premières. </li>
</ul>
</li>
<li>
Ajout d'une instance de BlendState dans la classe Pass et suppression de la gestion du mélange RGB/Alpha de la classe Pass. </li>
<li>
Modifications de <a class="el" href="d3/de2/a02959.html" title="Classe de gestion d&#39;un scène. ">castor3d::Scene</a> : <ul>
<li>
Ajout de la possibilité d'activer ou désactiver le deferred rendering, option disponible dans les fichier cscn. </li>
<li>
Ajout de fonctions templates pour ajouter, supprimer ou récupérer un objet quel que soit son type (Light, Geometry, Camera, SceneNode). </li>
<li>
Les Submesh sont maintenant triés en fonction du matériau appliqué afin de pouvoir, entre autres, rendre les sous-maillages avec transparence après les autres. </li>
</ul>
</li>
<li>
Modifications de <a class="el" href="de/dde/a02695.html" title="Classe de cible de rendu (render target) ">castor3d::RenderTarget</a> : <ul>
<li>
Modifié RenderTarget : elle contient maintenant son frame buffer et ce qui s'y rattache. C'est maintenant un Renderable et un TargetRenderer a donc été créé. </li>
<li>
RenderTarget utilise maintenant RenderTechnique pour effectuer son rendu. </li>
</ul>
</li>
<li>
Modifications de <a class="el" href="d8/d0f/a02707.html" title="Implémentation d&#39;une fenêtre de rendu. ">castor3d::RenderWindow</a> : <ul>
<li>
RenderWindow n'étend plus RenderTarget, mais en a un en membre privé. </li>
<li>
Création d'une méthode WindowRenderer::EndScene pour préparer le rendu du frame buffer de la RenderTarget dans la fenêtre. </li>
</ul>
</li>
<li>
Modifications des shaders : <ul>
<li>
Suppression des appels à ShaderObject afin d'en faire une classe interne à Castor3D. </li>
<li>
Modification des shaders, ils prennent maintenant en compte le modèle de shader, contiennent tous les fichiers et sources définis par modèle. Le choix du modèle est fait à la compilation, en choisissant le modèle le plus haut supporté. </li>
<li>
Modification des sources par défaut pour les shaders. Elles sont maitenant générées automatiquement et plus aucun fichier externe n'est nécessaire. </li>
<li>
Modification de afin de prendre en compte eFRAME_VARIABLE_TYPE. </li>
</ul>
</li>
<li>
Modifications de <a class="el" href="d1/d23/a02603.html" title="Classe contenant le contexte de rendu. ">castor3d::Context</a> <ul>
<li>
Suppression des méthodes Context::Enable et Context::Disable, suppression de la classe RenderState. </li>
<li>
Suppression de la méthode Context::setPolygonMode. </li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="mods_0_7_0_gl"></a>
GlRenderSystem</h3>
<ul>
<li>
Création de la classe GeometryBuffers pour gérer les Vertex Array Objects. Ils contiennent maintenant leurs tampons, permettant d'intégrer le choix d'utiliser les VAO ou non. </li>
<li>
Les Geometry shader fonctionnent dans GlRenderSystem. </li>
<li>
Suppression de la dépendance à GLEW. </li>
<li>
Support des extensions de debug d'OpenGL. </li>
<li>
Ajout du support de GL_MIRRORED_REPEAT. </li>
<li>
Ajout du support de GL_TEXTURE_MAX_ANISOTROPY. </li>
</ul>
<h3><a class="anchor" id="mods_0_7_0_gui"></a>
GuiCommon</h3>
<ul>
<li>
Maintenant ShaderDialog utilise wxSizers. </li>
<li>
Utilisation de wxStcEditor pour l'édition de shaders. </li>
<li>
La fenêtre de matériaux utilise les wxSizers pour placer et redimensionner les éléments. </li>
<li>
Ajout de la possibilité de changer le matériau utilisé par un sous-maillage, avec la fenêtre wxGeometriesListFrame. </li>
<li>
Correction de bugs dans le chargement des images. </li>
<li>
Amélioration de StcTextEditor afin d'avoir une meilleure coloration syntaxique. </li>
</ul>
<h3><a class="anchor" id="mods_0_7_0_cview"></a>
CastorViewer</h3>
<ul>
<li>
Maintenant, MainFrame utilise wxSizers. </li>
<li>
Ajout d'options de ligne de commande : <ul>
<li>
-f/&ndash;file pour charger un fichier de scène au chargement </li>
<li>
-h/&ndash;help pour afficher une aide </li>
<li>
-l/&ndash;level pour définir le niveau de log : <ul>
<li>
- 0 pour logger debug, infos, warnings et erreurs </li>
<li>
- 1 pour logger infos, warnings et erreurs </li>
<li>
- 2 pour logger warnings et erreurs </li>
<li>
- 3 pour logger les erreurs uniquement. </li>
</ul>
</li>
</ul>
</li>
<li>
Maintenant les plug-ins sont chargés dans un thread </li>
<li>
Ajout d'un bouton &quot;Export&quot;. </li>
</ul>
<h2><a class="anchor" id="bugs_0_7_0"></a>
Corrections</h2>
<h3><a class="anchor" id="bugs_0_7_0_gen"></a>
General</h3>
<ul>
<li>
Modification des importeurs afin de ne plus avoir de fuites de mémoires détectées par Visual Studio. </li>
</ul>
<h3><a class="anchor" id="bugs_0_7_0_cu"></a>
CastorUtils</h3>
<ul>
<li>
castor::Image a été modifiée, j'ai retiré la possibilité de charger les images par handle, car cela provoquait des problèmes avec FreeImage sur certains formats. </li>
<li>
Réparation d'un problème de matrices lors du rendu des incrustations. </li>
<li>
Correction des transformations récursives. </li>
</ul>
<h3><a class="anchor" id="bugs_0_7_0_c3d"></a>
Castor3D</h3>
<ul>
<li>
Corrections des sous-maillages ayant un matériau transparent, car ils n'étaient pas affichés. </li>
<li>
Corrigé la génération de mipmaps. </li>
</ul>
<h3><a class="anchor" id="bugs_0_7_0_cview"></a>
CastorViewer</h3>
<ul>
<li>
Déplacement de la destruction de m_pCastor3D dans la méthode OnDestroy. </li>
</ul>
<h3><a class="anchor" id="bugs_0_7_0_gl"></a>
GlRenderSystem</h3>
<ul>
<li>
Correction d'un bug dans doGetDeferredShaderSource. </li>
<li>
Correction de la génération des mipmaps dans les classes GlStaticTexture et GlDynamicTexture. </li>
<li>
Correction du traitement des textures de brillance dans les programmes GLSL auto générés. </li>
</ul>
<h3><a class="anchor" id="bugs_0_7_0_obj"></a>
ObjImporter</h3>
<ul>
<li>
L'import des matériaux et textures a été corrigé. </li>
</ul>
<h1><a class="anchor" id="version_0_6_1_2"></a>
Version 0.6.1.2</h1>
<h2><a class="anchor" id="adds_0_6_1_2"></a>
Ajouts</h2>
<ul>
<li>
Création du renderer Dx9Renderer, pour le rendu sous Direct3D 9. Il reste des choses à régler, notamment au niveau shaders et matrices, mais l'essentiel est là. </li>
<li>
Création de différents fichiers pour les contextes OpenGL (X11, Gtk, Msw), je n'ai pas encore pu tester ça correctement, mes drivers ATI ayant tué OpenGL sur ma Debian (snif...). </li>
<li>
Création d'une boîte de dialogue de sélection de renderer au lancement de CastorViewer, CastorShape et CastorArchitect, ajout d'un splash screen pour ces 3 applis. </li>
<li>
Ajout d'une petite appli qui transforme n'inmporte quel type d'image en XPM, plus facile pour le développement multiplateforme avec wxWidgets. </li>
<li>
Ajout de nouvelles fonctionnalités aux fichiers de scène (alpha_rejection, rgb_blend, alpha_blend, hl_shader_program, ...) </li>
</ul>
<h2><a class="anchor" id="mods_0_6_1_2"></a>
Modifications</h2>
<ul>
<li>
Optimisation du fichier CMakeLists et des fichiers du dossier 'cmake_modules' de façon à mieux prendre en charge les différentes plateformes, ainsi que les différentes configurations des PC clients. </li>
<li>
Revue du système de VertexBuffers et IndexBuffers, in troduction de la notion de VertexDeclaration et BufferElementGroup, ainsi on peut créer des VertexBuffers en mettant à peu près ce que l'on veut comme données dedans (parmi vertex, normals, tangents, diffuse, texcoords0,1,2,3) et ordonnées comme on veut. </li>
<li>
La classe Vertex dérive donc maintenant de BufferElementGroup. </li>
<li>
Les TextureEnvironment vont disparaitre à la prochaine version, la gestion du multitexturing se faisant maintenant directement au niveau des passes et des texture units. </li>
<li>
Suppression des fonctions issues de GLU, afin d'avoir une bibliothèque de moins à linker. </li>
</ul>
<h2><a class="anchor" id="bugs_0_6_1_2"></a>
Bugs</h2>
<ul>
<li>
Problème avec les matrices pour DxRenderSystem (je pense à la différence right-handed / left-handed, mais mes premiers tests à ce niveau ne sont pas concluants). </li>
<li>
Problème avec les shaders HLSL, je n'ai pour l'instant pas d'affichage, je pense que c'est lié aux problèmes de matrices que je rencontre avec Direct3D. </li>
<li>
Je n'ai pas avancé sur les shaders Cg et ai donc toujours les mêmes problèmes qu'auparavant. </li>
</ul>
<h1><a class="anchor" id="version_0_6_1_1"></a>
Version 0.6.1.1</h1>
<h2><a class="anchor" id="adds_0_6_1_1"></a>
Ajouts</h2>
<ul>
<li>
Création d'un fichier CMakeLists pour générer la solution à partir de CMake. </li>
<li>
Réorganisation des fichiers du dossier afin de mieux se prêter à ça. </li>
<li>
Séparation de la classe Plugin en 3 types différents : Renderer, Divider et Importer. Ainsi on pourra ajouter de nouveaux types de plug-in aisément et l'ajout d'importers et de subdiviseurs se fera sans devoir recompiler tous les projets. </li>
<li>
Ca entraîne la création d'un projet par importeur existant (OBJ, PLY, MD2, MD3, 3DS, ...) </li>
<li>
PNTrianglesDivider reste dans le Castor car utilisé par la primitive Icosahedron, LoopDivider est quand à lui placé dans un plug-in. </li>
<li>
J'ai commencé à implémenter les shaders Cg. Ca implique une modification des fichiers de scène, car dans Cg les variables uniform sont liées à un programme (vertex, pixel, geometry) plutôt qu'au shader complet comme c'est le cas en GLSL. Il reste quelques trucs à revoir (je ne sais pas encore quoi) pour que ça fonctionne. </li>
</ul>
<h2><a class="anchor" id="mods_0_6_1_1"></a>
Modifications</h2>
<ul>
<li>
Suppression de FreeImagePlus, maintenant les projets ne nécessitent plus que FreeImage. </li>
<li>
La création des tampons utilisés pour le rendu (Vertex, Attribute, Texture, Normals, ...) se fait maintenant par le RenderSystem =&gt; on peut donc les créer dans Castor3D et pas seulement dans les renderer (GL2, GL3 et dans le futur D3D). </li>
<li>
Suppression des Singletons pour les différents Managers (Image, Font, Scene, Material, Animation et Mesh). </li>
<li>
J'ai retouché les SceneNodes, j'ai refusionné les 3 classes différentes en une seule pour des commodités d'utilisation. </li>
<li>
Création d'une classe IdPoint, qui étend Point et y ajoute un Index qui correspond à son index dans le submesh. La fonction addPoint de Submesh crée maintenant des IdPoint et la fonction addFace se sert d'eux pour générer les Vertex. </li>
<li>
Les subdiviseurs peuvent subdiviser dans un thread à part, permettant de ne pas figer une application pendant la subdivision (cf. CastorShape). Il est possible d'assigner une fonction qui sera lancée à la fin de la subdivision (cf. CastorShape). </li>
</ul>
<h2><a class="anchor" id="fix_0_6_1_1"></a>
Corrections</h2>
<ul>
<li>
Correction du LoopDivider qui ne repositionnait plus les Vertex (les nouveaux étaient créés mais plus replacés, dû à la nouvelle architecture des Vertex) </li>
</ul>
<h1><a class="anchor" id="version_0_6_1_0"></a>
Version 0.6.1.0</h1>
<h2><a class="anchor" id="add_0_6_1_0"></a>
Ajouts</h2>
<ul>
<li>
Utilisation des smart pointers tr1. </li>
<li>
Création d'un tronc commun 'OpenGLCommon' pour les 2 renderers OpenGL </li>
<li>
Création d'une classe de RenderPipeline qui effectue les calculs matriciels et d'autres petites fonctions (perspective, ortho, ...) </li>
</ul>
<h2><a class="anchor" id="mods_0_6_1_0"></a>
Modifications</h2>
<ul>
<li>
Le MemoryManager (activé uniquement en debug) a été modifié, ajout d'une classe template MemoryTraced qui surcharge les operateurs new, delete new [] et delete [], ce afin d'avoir une meilleure trace des objets créés et détruits. Chaque classe des projets du Castor dérivent maintenant de celle-ci, et 3 fichiers sont donc créés dans le répertoire racine (C:\ sous Windows) : memoryleaks.log, memoryalloc.log et memorydealloc.log </li>
<li>
La classe TransformationUniform n'existe plus, il ne s'agit plus que d'une collection de fonctions sur matrices carrées 4x4. </li>
<li>
Modification de la gestion des SceneNode : Une classe de base NodeBase qui contient les informations qui se trouvaient dans SceneNode, 3 classes dérivées (GeometryMaterial, CameraMaterial et LightMaterial) qui s'occupent des fonctionnalités spécifiques au rendu de chacun des types liés (respectivement Geometry, Camera et Light). </li>
<li>
La classe MovableObject a maintenant moins de fonctionnalités (en fait elle n'a plus qu'un nom et un NodeBase) et les classes Light et Camera dérivent maintenant de cette classe (pour plus d'uniformité dans les déplacements de ces objets par rapport aux géométries) </li>
<li>
Renommage des classes UniformVariable en , pour refléter plus ce que c'est et moins lier ce genre de choses à OpenGL. </li>
<li>
Le module OpenGL 3.x/4.x est achevé. </li>
<li>
Modifier la structure des vertex de façon à ce qu'ils incluent les coordonnées de texture et les normales directement, de façon à n'avoir qu'1 buffer de vertex par mesh au lieu de 3 actuellement. </li>
</ul>
<h2><a class="anchor" id="fix_0_6_1_0"></a>
Corrections</h2>
<ul>
<li>
Correction du plantage à la fermeture du soft en release uniquement. </li>
<li>
Correction du rendu noir avec OpenGL 3.x, corrigé je ne sais trop comment, mais grâce à la suppression progressive du pipeline fixe en OpenGL 2.x </li>
</ul>
<h1><a class="anchor" id="version_0_6_0_0"></a>
Version 0.6.0.0</h1>
<h2><a class="anchor" id="adds_0_6_0_0"></a>
Ajouts</h2>
<ul>
<li>
Ajout d'une classe de gestion des matrices de projection, normale et visualisation, en vue de la suppression du pipeline fixe dans les renderers OpenGL. </li>
<li>
Ajout de smart pointers persos, inspirés de ceux de boost. </li>
<li>
Ajout d'une classe de gestion des angles, permettant de ne pas s'embeter avec les conversions radian-degrés. </li>
<li>
Ajout d'une classe de gestion de path, permettant de gérer les slash ou anti-slash selon l'OS. </li>
<li>
Création de conteneurs thread-safe issus de la stl (vector, list, map, multimap, set). </li>
<li>
Séparation du renderer OpenGL en 2 projets : un compatible OpenGL 2.x et antérieur (GL2RenderSystem) le second compatible OpenGL3.x et ultérieur (GL3RenderSystem). </li>
<li>
GL2RenderSystem : en fonction du PC client, suppression du pipeline fixe ou pas (si l'utilisation des shaders est permise le pipeline fixe est supprimé, sinon il est gardé) </li>
</ul>
<h2><a class="anchor" id="mods_0_6_0_0"></a>
Modifications</h2>
<ul>
<li>
Modification de la gestion des threads et mutexes, permettant le choix de ceux qu'on utilise (Win32, MFC ou boost). </li>
<li>
Modification des classes de gestion des matrices et points. </li>
<li>
Modification de la classe de gestion des chaînes de caractères qui sont maintenant indépendantes de Unicode ou MultiByte. </li>
<li>
Modification de la classe de gestion de fichiers qui ne permet plus le choix IO ou Stream mais utilise Stream uniquement. </li>
<li>
Modification du render system, ajout d'une classe renderable qui se charge de créer le renderer associé, afin de simplifier la création des dérivés de cette classe (submesh, scene node, light, camera...) </li>
<li>
Changement des noms des fichiers de scène/materiaux/meshes du moteur (respectivement cscn/cmtl/cmsh) </li>
</ul>
<h2><a class="anchor" id="fix_0_6_0_0"></a>
Corrections</h2>
<ul>
<li>
Protection par recursive mutex des données partagées (par les managers, essentiellement) permettant d'éviter des plantages aléatoires. </li>
</ul>
<h2><a class="anchor" id="todo_0_6_0"></a>
A faire</h2>
<ul>
<li>
Il reste un plantage à la fermeture du soft en release uniquement, apparemment dû aux shaders. </li>
<li>
Pour GL3RenderSystem, j'ai un rendu noir (?!?) mais les transformations sont prises en compte correctement. </li>
</ul>
<h1><a class="anchor" id="version_0_5_0_1"></a>
Version 0.5.0.1</h1>
<h2><a class="anchor" id="adds_0_5_0_1"></a>
Ajouts</h2>
<ul>
<li>
Dans cette version l'espace tangent est calculé et est disponible dans les shaders GLSL. </li>
<li>
Seule la tangente est calculée, la bitangente pouvant l'être dans le shader avec un produit vectoriel entre la tangente et la normale. </li>
<li>
Pour accéder à la tangente, il suffit de déclarer l'attribut suivant dans le vertex shader : </li>
<li>
attribute vec3 tangent; </li>
</ul>
<h2><a class="anchor" id="mods_0_5_0_1"></a>
Modifications</h2>
<ul>
<li>
Les différentes classes de point (2D, 3D, 4D) ont leur membres en union, ce qui permet de personnaliser l'appel de ces membres. Ainsi un point 2D a comme membres (x, y) ou (u, v). Un point 3D a comme membres (x, y, z) ou (u, v, w) ou (r, g, b). Un point 4D a comme membres (x, y, z, w) ou (r, g, b, a) ou (left, top, right, bottom). </li>
</ul>
<h2><a class="anchor" id="fix_0_5_0_1"></a>
Corrections</h2>
<ul>
<li>
Correction du plantage à la fermeture de l'application lors de la suppression des VBOs. J'ai intégré un buffer manager qui les supprime pendant une boucle d'affichage. </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Généré le Lundi 11 Décembre 2017 11:17:20 pour Castor3D par &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
